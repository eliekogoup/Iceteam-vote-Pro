(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4531:(e,t,r)=>{"use strict";r.d(t,{_:()=>s}),r(4232);var a=r(4613);async function s(){try{let{data:{user:e}}=await a.N.auth.getUser();if(!e)return!1;let{data:t,error:r}=await a.N.from("super_admins").select("id").eq("user_id",e.id).eq("is_active",!0).single();if(!r&&t)return console.log("\uD83D\uDD11 Super-admin d\xe9tect\xe9 via table super_admins:",e.email),!0;let{data:s}=await a.N.from("members").select("is_admin").eq("user_id",e.id).single(),n=!!(null==s?void 0:s.is_admin);return console.log("\uD83D\uDD0D V\xe9rification admin membre:",{found:!!s,is_admin:null==s?void 0:s.is_admin,result:n}),n}catch(e){return console.error("Erreur lors de la v\xe9rification des droits admin:",e),!1}}},4613:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(166).UU)("https://gllqzajfkkvpwnyultiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsbHF6YWpma2t2cHdueXVsdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODczNjcsImV4cCI6MjA3NDY2MzM2N30.B5gXCuB2XCpT11W6unXPhFC2WX-2TsPsJA7PA32qK8E")},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8971)}])},6930:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(4232),s=r(4613),n=r(4531);let i=()=>{let[e,t]=(0,a.useState)(null),[r,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),p=async(e,t)=>{try{var r;console.log("\uD83D\uDD0D Recherche membre avec authUserId:",e,"email:",t);let{data:a,error:n}=await s.N.from("members").select("\n          *,\n          member_groups(\n            groups(*)\n          )\n        ").eq("user_id",e).single();if(console.log("\uD83D\uDCCA R\xe9sultat recherche par user_id:",{data:a,error:n}),n||!a){console.log("\uD83D\uDD0D Recherche par email...");let{data:r,error:i}=await s.N.from("members").select("\n            *,\n            member_groups(\n              groups(*)\n            )\n          ").eq("email",t).single();console.log("\uD83D\uDCCA R\xe9sultat recherche par email:",{emailData:r,emailError:i}),r&&!i&&(await s.N.from("members").update({user_id:e}).eq("id",r.id),a=r,n=i)}if(n||!a)return console.log("❌ Membre non trouv\xe9:",null==n?void 0:n.message),null;console.log("✅ Donn\xe9es membre brutes:",a);let i={...a,groups:(null==(r=a.member_groups)?void 0:r.map(e=>e.groups))||[]};return console.log("✅ Membre avec groupes:",i),i}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du membre:",e),null}},x=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(console.log("\uD83D\uDD10 Auth user r\xe9cup\xe9r\xe9:",e),e){let r={id:e.id,email:e.email,user_metadata:e.user_metadata};t(r),console.log("\uD83D\uDC64 User state mis \xe0 jour:",r);let a=await p(e.id,e.email);i(a),console.log("\uD83D\uDC65 Member state mis \xe0 jour:",a)}else console.log("❌ Aucun utilisateur authentifi\xe9"),t(null),i(null)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration de l'utilisateur:",e),t(null),i(null)}finally{l(!1)}},u=async(e,t)=>{try{l(!0);let{error:r}=await s.N.auth.signInWithPassword({email:e,password:t});if(r)return{error:r.message};return await x(),{}}catch(e){return{error:"Erreur lors de la connexion"}}},m=async(e,t,r)=>{try{l(!0);let{error:a}=await s.N.auth.signUp({email:e,password:t,options:{data:{full_name:r}}});if(a)return{error:a.message};return{}}catch(e){return{error:"Erreur lors de l'inscription"}}},g=async()=>{l(!0),await s.N.auth.signOut(),t(null),i(null),l(!1)};return(0,a.useEffect)(()=>{x();let{data:{subscription:e}}=s.N.auth.onAuthStateChange(async(e,r)=>{"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await x():"SIGNED_OUT"===e&&(t(null),i(null),l(!1))});return()=>e.unsubscribe()},[]),(0,a.useEffect)(()=>{!async function(){if(e){let t=await (0,n._)();d(t),console.log("\uD83D\uDD11 \xc9tat admin mis \xe0 jour:",{user:e.email,isAdmin:t})}else d(!1)}()},[e]),{user:e,member:r,isLoading:o,isAdmin:c,signIn:u,signUp:m,signOut:g,refreshUser:x}}},7670:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});var a=r(4232),s=r(4613);let n=()=>{let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),l=async(e,t)=>{try{console.log("\uD83D\uDD0D Recherche super admin avec authUserId:",e,"email:",t);let{data:r,error:a}=await s.N.from("super_admins").select("*").eq("user_id",e).single();if(console.log("\uD83D\uDCCA R\xe9sultat recherche super admin:",{data:r,error:a}),a||!r)return console.log("❌ Super admin non trouv\xe9:",null==a?void 0:a.message),null;return console.log("✅ Super admin trouv\xe9:",r),r}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du super admin:",e),null}},c=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(console.log("\uD83D\uDD10 Auth user r\xe9cup\xe9r\xe9:",e),e){let r={id:e.id,email:e.email,user_metadata:e.user_metadata};t(r),console.log("\uD83D\uDC64 User state mis \xe0 jour:",r);let a=await l(e.id,e.email);n(a),console.log("\uD83D\uDC51 Super admin state mis \xe0 jour:",a)}else console.log("❌ Aucun utilisateur authentifi\xe9"),t(null),n(null)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration de l'utilisateur:",e),t(null),n(null)}finally{o(!1)}},d=async(e,t)=>{try{o(!0);let{error:r}=await s.N.auth.signInWithPassword({email:e,password:t});if(r)return{error:r.message};return{}}catch(e){return{error:e.message||"Une erreur est survenue"}}finally{o(!1)}},p=async()=>{await s.N.auth.signOut(),t(null),n(null)};(0,a.useEffect)(()=>{c();let e=s.N.auth.onAuthStateChange(async e=>{"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await c():"SIGNED_OUT"===e&&(t(null),n(null),o(!1))});return()=>e.data.subscription.unsubscribe()},[]);let x=!!r;return console.log("\uD83D\uDC51 \xc9tat super admin calcul\xe9:",{superAdmin:r,isSuperAdmin:x}),{user:e,superAdmin:r,isLoading:i,isSuperAdmin:x,signIn:d,signOut:p,refreshUser:c}}},8313:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(7876),s=r(8230),n=r.n(s),i=r(9099),o=r(6930),l=r(7670);function c(e){let{isAdmin:t}=e,r=(0,i.useRouter)(),{user:s,member:c,signOut:d}=(0,o.A)(),{isSuperAdmin:p}=(0,l.W)(),x=t||p;return(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:"/",className:"/"===r.pathname?"active":"",children:"\uD83C\uDFE0 Accueil"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:"/identite",className:"/identite"===r.pathname?"active":"",children:"\uD83D\uDDF3️ Voter"})}),x&&(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:"/admin",className:r.pathname.startsWith("/admin")?"active":"",children:"⚙️ Administration"})}),s&&(0,a.jsxs)("li",{className:"nav-user-section",children:[(0,a.jsxs)("div",{className:"nav-user-info",children:[(0,a.jsx)("span",{className:"nav-user-name",children:c?"".concat(c.prenom," ").concat(c.nom):s.email}),x&&(0,a.jsx)("span",{className:"nav-admin-badge",children:p?"Super Admin":"Admin"})]}),(0,a.jsx)("button",{onClick:d,className:"nav-logout-btn",children:"D\xe9connexion"})]}),!s&&(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:"/auth/login",className:"/auth/login"===r.pathname?"active":"",children:"\uD83D\uDD10 Connexion"})})]})})}},8971:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(7876),s=r(5961),n=r.n(s),i=r(4232),o=r(4613),l=r(8230),c=r.n(l),d=r(8313),p=r(6245);let x=()=>(0,p.createBrowserClient)("https://gllqzajfkkvpwnyultiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsbHF6YWpma2t2cHdueXVsdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODczNjcsImV4cCI6MjA3NDY2MzM2N30.B5gXCuB2XCpT11W6unXPhFC2WX-2TsPsJA7PA32qK8E");async function u(e){let t=x();try{console.log("\uD83D\uDCCA V\xe9rification du statut de l'\xe9dition ".concat(e,"..."));let{data:r,error:a}=await t.from("editions").select("group_id").eq("id",e).single();if(a||!r)return console.error("❌ \xc9dition non trouv\xe9e:",a),{isComplete:!1,totalMembers:0,totalVoters:0,progress:0};let{data:s,error:n}=await t.from("member_groups").select("\n        member_id,\n        members!inner(id, is_active)\n      ").eq("group_id",r.group_id);if(n)return console.error("❌ Erreur r\xe9cup\xe9ration membres du groupe:",n),{isComplete:!1,totalMembers:0,totalVoters:0,progress:0};let i=(s||[]).filter(e=>{var t;let r=e.members;return!!r&&(Array.isArray(r)?(null==(t=r[0])?void 0:t.is_active)!==!1:!1!==r.is_active)});console.log("\uD83D\uDC65 Membres actifs du groupe ".concat(r.group_id,":"),i.length);let{data:o,error:l}=await t.from("votes").select("voter_id").eq("edition_id",e);if(l)return console.error("❌ Erreur r\xe9cup\xe9ration votes:",l),{isComplete:!1,totalMembers:i.length,totalVoters:0,progress:0};let c=new Set((null==o?void 0:o.map(e=>e.voter_id))||[]),d=i.length,p=c.size,x=d>0?p/d*100:0;return console.log("\uD83D\uDCCA Statut \xe9dition ".concat(e,": ").concat(p,"/").concat(d," votes (").concat(Math.round(x),"%)")),{isComplete:d>0&&p>=d,totalMembers:d,totalVoters:p,progress:x}}catch(e){return console.error("Erreur lors de la v\xe9rification du statut de l'\xe9dition:",e),{isComplete:!1,totalMembers:0,totalVoters:0,progress:0}}}async function m(e,t){let r=x();try{console.log("\uD83D\uDDF3️ V\xe9rification vote pour membre ".concat(t," sur \xe9dition ").concat(e,"..."));let{data:a,error:s}=await r.from("votes").select("id").eq("edition_id",e).eq("voter_id",t),n=!s&&a&&a.length>0;return console.log("\uD83D\uDDF3️ Membre ".concat(t," a vot\xe9 pour \xe9dition ").concat(e,": ").concat(n?"OUI":"NON")),{hasVoted:n,memberId:t}}catch(e){return console.error("Erreur lors de la v\xe9rification du vote de l'utilisateur:",e),{hasVoted:!1,memberId:t}}}async function g(e){let t=x();try{console.log("\uD83D\uDD0D Recherche du membre pour email:",e);let{data:r,error:a}=await t.from("members").select("count").limit(1);if(a)return console.error("❌ Erreur de connexion \xe0 la base de donn\xe9es:",a),[];console.log("✅ Connexion \xe0 la base de donn\xe9es OK");let{data:s,error:n}=await t.from("members").select("id, email, nom, prenom").eq("email",e).single();if(n||!s){console.warn("❌ Membre non trouv\xe9 pour email:",e,n);let{data:r}=await t.from("members").select("email, nom, prenom").limit(10);console.log("\uD83D\uDCCB Premiers emails dans la base:",null==r?void 0:r.map(e=>"".concat(e.email," (").concat(e.prenom," ").concat(e.nom,")")));let a=e.split("@")[0].toLowerCase(),{data:s}=await t.from("members").select("email, nom, prenom").or("email.ilike.%".concat(a,"%,nom.ilike.%").concat(a,"%,prenom.ilike.%").concat(a,"%")).limit(5);return console.log("\uD83D\uDD0D Recherche floue pour des emails similaires:",s),[]}console.log("✅ Membre trouv\xe9:",s);let{data:i,error:o}=await t.from("member_groups").select("\n        group_id,\n        groups(id, name)\n      ").eq("member_id",s.id);if(o)return console.error("❌ Erreur r\xe9cup\xe9ration groupes:",o),[];console.log("\uD83D\uDCCA R\xe9sultat brut member_groups:",i);let l=(null==i?void 0:i.map(e=>e.group_id))||[];if(0===l.length){console.warn("⚠️ Aucun groupe trouv\xe9 pour le membre:",e);let{data:r}=await t.from("member_groups").select("member_id, group_id").limit(10);console.log("\uD83D\uDCCA Toutes les associations member_groups:",r);let{data:a}=await t.from("groups").select("id, name").limit(10);return console.log("\uD83D\uDC65 Tous les groupes disponibles:",a),[]}console.log("\uD83D\uDC65 Groupes du membre [".concat(s.id,"]:"),l),console.log("\uD83D\uDCCA Tentative de r\xe9cup\xe9ration des \xe9ditions...");let{data:c,error:d}=await t.from("editions").select("id, title, description, group_id, no_self_vote").in("group_id",l).order("id",{ascending:!1});if(d)return console.error("❌ Erreur r\xe9cup\xe9ration \xe9ditions:",d),[];if(console.log("\uD83D\uDCCA \xc9ditions trouv\xe9es pour les groupes [".concat(l.join(", "),"]:"),(null==c?void 0:c.length)||0),!c||0===c.length){let{data:e}=await t.from("editions").select("id, title, description, group_id").limit(10);return console.log("\uD83D\uDCCA Toutes les \xe9ditions dans la base:",e),[]}return await Promise.all((c||[]).map(async e=>{let t=await u(e.id),r=await m(e.id,s.id);return{...e,...t,userHasVoted:r.hasVoted,canViewResults:t.isComplete||r.hasVoted}}))}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des \xe9ditions:",e),[]}}var f=r(7670);function b(){let[e,t]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!0),[l,p]=(0,i.useState)(null),[x,u]=(0,i.useState)(null),[m,b]=(0,i.useState)([]),[h,y]=(0,i.useState)(!1),[j,v]=(0,i.useState)({pending:0,completed:0,finished:0,total:0}),{isSuperAdmin:w}=(0,f.W)();return(0,i.useEffect)(()=>{!async function(){let{data:{user:e}}=await o.N.auth.getUser();if(p(e),!e){t(!1),s(!1);return}if(w){t(!0),s(!1);return}let{data:r}=await o.N.from("members").select("is_admin, nom, prenom, email").eq("user_id",e.id).single();u(r),t(!!(null==r?void 0:r.is_admin)),s(!1)}()},[w]),(0,i.useEffect)(()=>{async function e(){if(null==l?void 0:l.email){y(!0);try{console.log("\uD83D\uDD04 Chargement des \xe9ditions pour:",l.email);let e=await g(l.email);console.log("\uD83D\uDCCA \xc9ditions re\xe7ues:",e),b(e);let t=e.filter(e=>!e.userHasVoted&&!e.isComplete).length,r=e.filter(e=>e.userHasVoted&&!e.isComplete).length,a=e.filter(e=>e.isComplete).length,s=e.length;console.log("\uD83D\uDCCA Statistiques calcul\xe9es:",{pending:t,completed:r,finished:a,total:s}),console.log("\uD83D\uDCCA D\xe9tail des \xe9ditions:",e.map(e=>({title:e.title,userHasVoted:e.userHasVoted,canViewResults:e.canViewResults,isComplete:e.isComplete}))),v({pending:t,completed:r,finished:a,total:s})}catch(e){console.error("❌ Erreur lors du chargement des \xe9ditions:",e),b([]),v({pending:0,completed:0,finished:0,total:0})}finally{y(!1)}}}(null==l?void 0:l.email)&&e()},[null==l?void 0:l.email]),(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},className:"jsx-9157c0f81cc17bcf container",children:[!r&&(0,a.jsx)(d.A,{isAdmin:e}),(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"40px",marginTop:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"40px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("h1",{style:{fontSize:"3rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"800",margin:"0 0 16px 0"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDDF3️ Iceteam Elipsos"}),(0,a.jsx)("p",{style:{fontSize:"18px",color:"#6b7280",margin:0},className:"jsx-9157c0f81cc17bcf",children:"Bienvenue sur Ice Team Awards !"})]}),r?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"60px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid #f3f4f6",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"},className:"jsx-9157c0f81cc17bcf"}),(0,a.jsx)("p",{style:{color:"#6b7280",fontSize:"16px"},className:"jsx-9157c0f81cc17bcf",children:"Chargement..."})]}):(0,a.jsxs)(a.Fragment,{children:[l&&x&&(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"20px 30px",borderRadius:"16px",marginBottom:"40px",boxShadow:"0 10px 25px -5px rgba(16, 185, 129, 0.3)"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsxs)("div",{style:{fontSize:"18px",fontWeight:"600"},className:"jsx-9157c0f81cc17bcf",children:["\uD83D\uDC4B Salut ",(0,a.jsx)("strong",{className:"jsx-9157c0f81cc17bcf",children:x.prenom||x.nom||l.email.split("@")[0]})," !"]})}),l&&(0,a.jsxs)("div",{style:{marginBottom:"50px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"30px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDCCA"}),(0,a.jsx)("h2",{style:{margin:0,fontSize:"24px",fontWeight:"700",color:"#111827"},className:"jsx-9157c0f81cc17bcf",children:"Votre activit\xe9 de vote"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"16px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsxs)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"1px solid #f3f4f6",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"48px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"12px"},className:"jsx-9157c0f81cc17bcf",children:j.pending}),(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"Votes en attente"})]}),(0,a.jsxs)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"1px solid #f3f4f6",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"48px",fontWeight:"800",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"12px"},className:"jsx-9157c0f81cc17bcf",children:j.completed}),(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"Votes effectu\xe9s"})]}),(0,a.jsxs)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"1px solid #f3f4f6",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"48px",fontWeight:"800",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"12px"},className:"jsx-9157c0f81cc17bcf",children:j.finished}),(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"Votes termin\xe9s"})]}),(0,a.jsxs)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"1px solid #f3f4f6",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"48px",fontWeight:"800",background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"12px"},className:"jsx-9157c0f81cc17bcf",children:j.total}),(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"Total \xe9ditions"})]})]})]}),l&&(0,a.jsxs)("div",{style:{marginTop:"50px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"30px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDCCA"}),(0,a.jsx)("h2",{style:{margin:0,fontSize:"24px",fontWeight:"700",color:"#111827"},className:"jsx-9157c0f81cc17bcf",children:"\xc9ditions de vote disponibles"})]}),h?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"60px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid #f3f4f6",borderTop:"4px solid #8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"},className:"jsx-9157c0f81cc17bcf"}),(0,a.jsx)("p",{style:{color:"#6b7280",fontSize:"16px"},className:"jsx-9157c0f81cc17bcf",children:"Chargement des \xe9ditions..."})]}):m.length>0?(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 400px))",gap:"20px",justifyContent:"center"},className:"jsx-9157c0f81cc17bcf",children:m.map(e=>{let t=!e.userHasVoted&&!e.isComplete;return(0,a.jsxs)("div",{style:{background:"white",padding:"24px",borderRadius:"20px",border:t?"2px solid #3b82f6":"2px solid #e5e7eb",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-5px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:[t&&(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #3b82f6, #8b5cf6, #3b82f6)",backgroundSize:"200% 100%",animation:"gradient 3s ease infinite"},className:"jsx-9157c0f81cc17bcf"}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#111827",lineHeight:"1.3"},className:"jsx-9157c0f81cc17bcf",children:e.title}),(0,a.jsx)("div",{style:{background:e.isComplete?"linear-gradient(135deg, #10b981 0%, #059669 100%)":e.userHasVoted?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":t?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white",padding:"6px 14px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:e.isComplete?"✅ Termin\xe9":e.userHasVoted?"✓ Vot\xe9":t?"\uD83D\uDDF3️ En cours":"❌ Non disponible"})]}),(0,a.jsxs)("div",{style:{marginBottom:"24px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"\xc9dition de vote"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#374151",fontSize:"15px",marginBottom:"20px",fontWeight:"500"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("span",{style:{fontSize:"16px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDC8E"}),e.description?e.description:"\xc9dition #".concat(e.id," • ").concat(e.no_self_vote?"Sans auto-vote":"Groupe ".concat(e.group_id))]}),(0,a.jsxs)("div",{style:{marginBottom:"12px"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{color:"#6b7280",fontSize:"12px",fontWeight:"500",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-9157c0f81cc17bcf",children:"Participation"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827",marginBottom:"8px"},className:"jsx-9157c0f81cc17bcf",children:[e.totalVoters," / ",e.totalMembers," votes (",e.progress.toFixed(0),"%)"]})]}),(0,a.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:"#f3f4f6",borderRadius:"20px",overflow:"hidden",position:"relative"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsx)("div",{style:{width:"".concat(e.progress,"%"),height:"100%",background:"linear-gradient(90deg, #3b82f6, #8b5cf6)",borderRadius:"20px",transition:"width 0.5s ease",position:"relative"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:e.progress>0?"shimmer 2s infinite":"none"},className:"jsx-9157c0f81cc17bcf"})})})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"20px",flexWrap:"wrap"},className:"jsx-9157c0f81cc17bcf",children:[t&&(0,a.jsx)(c(),{href:"/vote?edition=".concat(e.id),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"white",textDecoration:"none",borderRadius:"10px",fontSize:"13px",fontWeight:"600",boxShadow:"0 3px 6px -1px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",flex:"1",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 10px -1px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 3px 6px -1px rgba(0, 0, 0, 0.1)"},children:"\uD83D\uDDF3️ Voter"}),(e.userHasVoted||e.isComplete)&&(0,a.jsx)(c(),{href:"/results/".concat(e.id),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:e.isComplete?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",textDecoration:"none",borderRadius:"10px",fontSize:"13px",fontWeight:"600",boxShadow:"0 3px 6px -1px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",flex:"1",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 10px -1px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 3px 6px -1px rgba(0, 0, 0, 0.1)"},children:"\uD83D\uDCCA R\xe9sultats"}),!t&&!e.userHasVoted&&!e.isComplete&&(0,a.jsx)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white",borderRadius:"10px",fontSize:"13px",fontWeight:"600",flex:"1",justifyContent:"center"},className:"jsx-9157c0f81cc17bcf",children:"⏸️ Non disponible"})]})]},e.id)})}):(0,a.jsxs)("div",{style:{textAlign:"center",padding:"60px 40px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",borderRadius:"20px",border:"2px dashed #cbd5e1"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{style:{color:"#64748b",fontSize:"18px",fontWeight:"500",margin:0},className:"jsx-9157c0f81cc17bcf",children:"Aucune \xe9dition de vote disponible pour le moment."})]})]}),!l&&(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",color:"white",padding:"20px 30px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 25px -5px rgba(251, 191, 36, 0.3)"},className:"jsx-9157c0f81cc17bcf",children:[(0,a.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},className:"jsx-9157c0f81cc17bcf",children:"⚠️ Connexion requise"}),(0,a.jsxs)("div",{style:{fontSize:"14px",opacity:"0.9"},className:"jsx-9157c0f81cc17bcf",children:["Vous n'\xeates pas connect\xe9. ",(0,a.jsx)(c(),{href:"/login",style:{color:"white",textDecoration:"underline"},children:"Se connecter"})]})]}),(!l||e)&&(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px",marginTop:"50px"},className:"jsx-9157c0f81cc17bcf",children:[!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-8px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsxs)(c(),{href:"/identite",style:{textDecoration:"none",color:"inherit"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDDF3️"}),(0,a.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"8px"},className:"jsx-9157c0f81cc17bcf",children:"Commencer \xe0 voter"}),(0,a.jsx)("p",{style:{color:"#6b7280",fontSize:"14px",margin:0,lineHeight:"1.4"},className:"jsx-9157c0f81cc17bcf",children:"Participer aux votes en cours"})]})}),(0,a.jsx)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-8px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsxs)(c(),{href:"/login",style:{textDecoration:"none",color:"inherit"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},className:"jsx-9157c0f81cc17bcf",children:"\uD83D\uDD10"}),(0,a.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"8px"},className:"jsx-9157c0f81cc17bcf",children:"Connexion"}),(0,a.jsx)("p",{style:{color:"#6b7280",fontSize:"14px",margin:0,lineHeight:"1.4"},className:"jsx-9157c0f81cc17bcf",children:"Se connecter ou se d\xe9connecter"})]})})]}),e&&(0,a.jsx)("div",{style:{background:"white",padding:"32px 24px",borderRadius:"20px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-8px)",e.currentTarget.style.boxShadow="0 20px 35px -5px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1)"},className:"jsx-9157c0f81cc17bcf",children:(0,a.jsxs)(c(),{href:"/admin",style:{textDecoration:"none",color:"inherit"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},className:"jsx-9157c0f81cc17bcf",children:"⚙️"}),(0,a.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"8px"},className:"jsx-9157c0f81cc17bcf",children:"Administration"}),(0,a.jsx)("p",{style:{color:"#6b7280",fontSize:"14px",margin:0,lineHeight:"1.4"},className:"jsx-9157c0f81cc17bcf",children:"G\xe9rer les votes et les participants"})]})})]})]})]})]}),(0,a.jsx)(n(),{id:"9157c0f81cc17bcf",children:'@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@keyframes shimmer{0%{transform:translatex(-100%)}100%{transform:translatex(100%)}}*{box-sizing:border-box}@media(max-width:768px){.container{padding:10px!important}h1{font-size:2rem!important}h2{font-size:1.5rem!important}.edition-card{padding:20px!important;margin:10px 0!important}[style*="gridTemplateColumns"]{grid-template-columns:1fr!important;gap:16px!important}[style*="padding: \'10px 16px\'"]{padding:8px 12px!important;font-size:12px!important}[style*="padding: \'32px 24px\'"]{padding:24px 16px!important}.admin-nav{flex-wrap:wrap!important;gap:8px!important}}@media(max-width:480px){.container{padding:8px!important}h1{font-size:1.75rem!important}[style*="gridTemplateColumns: \'repeat(auto-fit, minmax(160px, 1fr))\'"]{grid-template-columns:repeat(2,1fr)!important}[style*="flex: \'1\'"]{min-width:100%!important}}@media(min-width:769px)and (max-width:1024px){.container{padding:16px!important}[style*="gridTemplateColumns: \'repeat(auto-fit, minmax(280px, 400px))\'"]{grid-template-columns:repeat(2,1fr)!important}[style*="gridTemplateColumns: \'repeat(auto-fit, minmax(160px, 1fr))\'"]{grid-template-columns:repeat(4,1fr)!important}}'})]})}}},e=>{e.O(0,[166,8,997,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);