(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{2168:(i,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>o});var n=t(7876),s=t(4232),d=t(9099),l=t(4613);function o(){let i=(0,d.useRouter)(),[e,t]=(0,s.useState)([]),[o,u]=(0,s.useState)([]),[r,c]=(0,s.useState)(""),[a,h]=(0,s.useState)([]),[_,f]=(0,s.useState)(!1);async function j(){let{data:i}=await l.N.from("editions").select("id, title").order("id");i&&t(i)}async function m(){let{data:i}=await l.N.from("questions").select("id, text").order("id");i&&u(i)}async function p(i){f(!0);let{data:e}=await l.N.from("editions_questions").select("edition_id, question_id").eq("edition_id",i);e&&h(e),f(!1)}async function x(i){r&&(await l.N.from("editions_questions").insert({edition_id:r,question_id:i}),p(r))}async function q(i){r&&(await l.N.from("editions_questions").delete().eq("edition_id",r).eq("question_id",i),p(r))}(0,s.useEffect)(()=>{j(),m()},[]),(0,s.useEffect)(()=>{r?p(r):h([])},[r]);let N=a.map(i=>i.question_id);return(0,n.jsxs)("div",{style:{padding:32},children:[(0,n.jsx)("button",{onClick:()=>i.push("/admin"),children:"← Retour \xe0 l'administration"}),(0,n.jsx)("h2",{children:"Liaison Questions ↔ \xc9dition"}),(0,n.jsxs)("label",{children:["Choisir une \xe9dition :",(0,n.jsxs)("select",{value:r,onChange:i=>c(Number(i.target.value)),style:{marginLeft:10},children:[(0,n.jsx)("option",{value:"",children:"-- S\xe9lectionner --"}),e.map(i=>(0,n.jsx)("option",{value:i.id,children:i.title},i.id))]})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Questions associ\xe9es \xe0 l'\xe9dition"}),_?(0,n.jsx)("p",{children:"Chargement..."}):(0,n.jsxs)("ul",{children:[0===a.length&&(0,n.jsx)("li",{children:"Aucune question li\xe9e."}),a.map(i=>{var e;let t=o.find(e=>e.id===i.question_id);return(0,n.jsxs)("li",{children:[null!=(e=null==t?void 0:t.text)?e:"?",(0,n.jsx)("button",{style:{marginLeft:8,color:"red"},onClick:()=>q(i.question_id),children:"Retirer"})]},i.question_id)})]}),(0,n.jsx)("h4",{children:"Ajouter une question \xe0 cette \xe9dition"}),(0,n.jsx)("ul",{children:o.filter(i=>!N.includes(i.id)).map(i=>(0,n.jsxs)("li",{children:[i.text,(0,n.jsx)("button",{style:{marginLeft:8},onClick:()=>x(i.id),children:"Ajouter"})]},i.id))})]})]})}},4022:(i,e,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/editions-questions",function(){return t(2168)}])},4613:(i,e,t)=>{"use strict";t.d(e,{N:()=>n});let n=(0,t(166).UU)("https://gllqzajfkkvpwnyultiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsbHF6YWpma2t2cHdueXVsdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODczNjcsImV4cCI6MjA3NDY2MzM2N30.B5gXCuB2XCpT11W6unXPhFC2WX-2TsPsJA7PA32qK8E")},9099:(i,e,t)=>{i.exports=t(6296)}},i=>{i.O(0,[166,636,593,792],()=>i(i.s=4022)),_N_E=i.O()}]);