(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{524:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/creer-membre",function(){return r(531)}])},531:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(7876),s=r(4232),a=r(4613);function n(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)(""),[u,l]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[j,b]=(0,s.useState)(!1),g=async i=>{i.preventDefault(),p(""),m(""),b(!0);let s=await fetch("/api/admin-create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),c=await s.json();if(!s.ok){p("Erreur cr\xe9ation utilisateur Supabase Auth : "+c.error),b(!1);return}let h=c.user.id,{error:j}=await a.N.from("members").insert({name:u,group_id:d,user_id:h});if(j){p("Utilisateur cr\xe9\xe9 mais erreur lors de la cr\xe9ation du membre : "+j.message),b(!1);return}m("Membre cr\xe9\xe9 avec succ\xe8s !"),t(""),n(""),l(""),o(""),b(!1)};return(0,i.jsxs)("div",{style:{padding:32,maxWidth:500,margin:"auto"},children:[(0,i.jsx)("h1",{children:"Cr\xe9er un nouveau membre + utilisateur"}),(0,i.jsxs)("form",{onSubmit:g,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Email (identifiant) :"}),(0,i.jsx)("input",{type:"email",value:e,required:!0,onChange:e=>t(e.target.value),style:{width:"100%",marginBottom:10}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Mot de passe :"}),(0,i.jsx)("input",{type:"password",value:r,required:!0,onChange:e=>n(e.target.value),style:{width:"100%",marginBottom:10}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Nom affich\xe9 :"}),(0,i.jsx)("input",{type:"text",value:u,required:!0,onChange:e=>l(e.target.value),style:{width:"100%",marginBottom:10}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Groupe (ID) :"}),(0,i.jsx)("input",{type:"number",value:d,required:!0,onChange:e=>o(e.target.value),style:{width:"100%",marginBottom:10}})]}),(0,i.jsx)("button",{type:"submit",style:{marginTop:16},disabled:j,children:j?"Cr\xe9ation...":"Cr\xe9er le membre"}),h&&(0,i.jsx)("div",{style:{color:"red",marginTop:10},children:h}),c&&(0,i.jsx)("div",{style:{color:"green",marginTop:10},children:c})]})]})}},4613:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});let i=(0,r(166).UU)("https://gllqzajfkkvpwnyultiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsbHF6YWpma2t2cHdueXVsdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODczNjcsImV4cCI6MjA3NDY2MzM2N30.B5gXCuB2XCpT11W6unXPhFC2WX-2TsPsJA7PA32qK8E")}},e=>{e.O(0,[166,636,593,792],()=>e(e.s=524)),_N_E=e.O()}]);