(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{84:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(7876),i=a(4232),n=a(9099),t=a(8230),l=a.n(t),d=a(4613);function u(){let[e,s]=(0,i.useState)(""),[a,t]=(0,i.useState)(""),[u,c]=(0,i.useState)(!1),[o,h]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[j,N]=(0,i.useState)(!1),x=(0,n.useRouter)();(0,i.useEffect)(()=>{(async()=>{let{data:{session:e}}=await d.N.auth.getSession();e?N(!0):h("Lien de r\xe9initialisation invalide ou expir\xe9. Veuillez demander un nouveau lien.")})()},[]);let v=async s=>{if(s.preventDefault(),c(!0),h(""),e.length<6){h("Le mot de passe doit contenir au moins 6 caract\xe8res"),c(!1);return}if(e!==a){h("Les mots de passe ne correspondent pas"),c(!1);return}try{let{error:s}=await d.N.auth.updateUser({password:e});if(s)throw s;p("Mot de passe mis \xe0 jour avec succ\xe8s ! Vous allez \xeatre redirig\xe9 vers la page de connexion."),setTimeout(()=>{x.push("/login")},3e3)}catch(e){h("Erreur lors de la mise \xe0 jour : "+e.message)}c(!1)};return j||o?(0,r.jsx)("div",{className:"auth-container",children:(0,r.jsxs)("div",{className:"auth-card",children:[(0,r.jsxs)("div",{className:"auth-header",children:[(0,r.jsx)("h1",{children:"\uD83D\uDD12 Nouveau mot de passe"}),(0,r.jsx)("p",{children:"Choisissez un nouveau mot de passe s\xe9curis\xe9"})]}),o&&(0,r.jsx)("div",{className:"alert alert-error",children:(0,r.jsxs)("span",{children:["⚠️ ",o]})}),m&&(0,r.jsx)("div",{className:"alert alert-success",children:(0,r.jsxs)("span",{children:["✅ ",m]})}),j&&!m&&(0,r.jsxs)("form",{onSubmit:v,className:"auth-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"password",children:"Nouveau mot de passe"}),(0,r.jsx)("input",{id:"password",type:"password",value:e,onChange:e=>s(e.target.value),placeholder:"••••••••",required:!0,disabled:u,minLength:6}),(0,r.jsx)("small",{children:"Au moins 6 caract\xe8res"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:a,onChange:e=>t(e.target.value),placeholder:"••••••••",required:!0,disabled:u,minLength:6}),(0,r.jsx)("small",{children:"Ressaisissez le m\xeame mot de passe"})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:u,children:u?"\uD83D\uDD04 Mise \xe0 jour...":"\uD83D\uDCBE Mettre \xe0 jour le mot de passe"})]}),(0,r.jsx)("div",{className:"auth-footer",children:(0,r.jsxs)("div",{className:"auth-links",children:[(0,r.jsx)(l(),{href:"/login",className:"link-secondary",children:"← Retour \xe0 la connexion"}),(0,r.jsx)(l(),{href:"/forgot-password",className:"link-secondary",children:"Demander un nouveau lien"})]})})]})}):(0,r.jsx)("div",{className:"auth-container",children:(0,r.jsx)("div",{className:"auth-card",children:(0,r.jsx)("div",{className:"loading-spinner",children:"V\xe9rification du lien..."})})})}},3274:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return a(84)}])},4613:(e,s,a)=>{"use strict";a.d(s,{N:()=>r});let r=(0,a(166).UU)("https://gllqzajfkkvpwnyultiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsbHF6YWpma2t2cHdueXVsdGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODczNjcsImV4cCI6MjA3NDY2MzM2N30.B5gXCuB2XCpT11W6unXPhFC2WX-2TsPsJA7PA32qK8E")}},e=>{e.O(0,[166,8,636,593,792],()=>e(e.s=3274)),_N_E=e.O()}]);